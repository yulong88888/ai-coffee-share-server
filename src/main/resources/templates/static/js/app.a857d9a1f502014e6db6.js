webpackJsonp([1],{"34KM":function(t,e){},"7uN0":function(t,e){},F1mI:function(t,e){},ITfj:function(t,e){},KcjH:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("7+uW"),o={beforeCreate:function(){var t=this;console.log("获取用户基本数据"),console.log(this.$route.query);var e=this.$route.query.code;null==e?alert("Code Error"):(this.$store.dispatch("setUserBaseInfo",e),console.log("yeah"),this.$axios({method:"post",url:"./getUserBaseInfo",params:{code:e}}).then(function(e){console.log(e.data.recdata),t.$store.dispatch("setUserBaseInfo",e.data.recdata),t.$axios.get("./api/baseInfo/get?openId="+e.data.recdata.openid).then(function(e){0===e.data.code&&(console.log(e.data.recdata),t.$store.dispatch("setBaseInfo",e.data.recdata))}),t.$axios.get("./api/product/get?openId="+e.data.recdata.openid).then(function(e){0===e.data.code&&(console.log(e.data.recdata),t.$store.dispatch("setProductInfo",e.data.recdata))})}))}},a={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]},n=s("VU/8")(o,a,!1,null,null,null).exports,r=s("/ocq"),l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-carousel",{attrs:{interval:2500,arrow:"never",height:"150px","indicator-position":"none"}},this._l(this.imgDatas,function(t){return e("el-carousel-item",{key:t},[e("img",{staticStyle:{width:"100%"},attrs:{src:t}})])}))},staticRenderFns:[]},c=s("VU/8")({name:"swipe",props:["imgDatas"]},l,!1,null,null,null).exports,d=s("GQaK"),u={name:"cartcontrol",props:{product:{type:Object}},methods:{addCart:function(t){t._constructed&&(this.product.count?this.product.count++:i.default.set(this.product,"count",1),this.$emit("add",t.target))},decreaseCart:function(t){t._constructed&&this.product.count&&this.product.count--}}},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cartcontrol"},[s("transition",{attrs:{name:"move"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.product.count>0,expression:"product.count>0"}],staticClass:"cart-decrease",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.decreaseCart(e)}}},[s("span",{staticClass:"inner icon-remove_circle_outline"})])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.product.count>0,expression:"product.count>0"}],staticClass:"cart-count"},[t._v(t._s(t.product.count))]),t._v(" "),s("div",{staticClass:"cart-add icon-add_circle",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addCart(e)}}})],1)},staticRenderFns:[]};var f=s("VU/8")(u,p,!1,function(t){s("F1mI")},null,null).exports,h={components:{Cartcontrol:f},name:"shopcart",props:{selectProducts:{type:Array,default:function(){return[{price:10,count:1}]}},deliveryPrice:{type:Number,default:0},minPrice:{type:Number,default:0}},data:function(){return{balls:[{show:!1},{show:!1},{show:!1},{show:!1},{show:!1}],dropBalls:[],fold:!0}},computed:{totalPrice:function(){var t=0;return this.selectProducts.forEach(function(e){t+=e.price*e.count}),t},totalCount:function(){var t=0;return this.selectProducts.forEach(function(e){t+=e.count}),t},payDesc:function(){return 0===this.totalPrice?"￥"+this.minPrice+"元起送":this.totalPrice<this.minPrice?"还差￥"+(this.minPrice-this.totalPrice)+"元起送":"去结算"},payClass:function(){return this.totalPrice<this.minPrice?"not-enough":"enough"},listShow:function(){var t=this;if(!this.totalCount)return this.fold=!0,!1;var e=!this.fold;return e&&this.$nextTick(function(){t.scroll?t.scroll.refresh():t.scroll=new d.a(t.$refs.listContent,{click:!0})}),e}},methods:{drop:function(t){for(var e=0;e<this.balls.length;e++){var s=this.balls[e];if(!s.show)return s.show=!0,s.el=t,void this.dropBalls.push(s)}},beforeDrop:function(t){for(var e=this.balls.length;e--;){var s=this.balls[e];if(s.show){var i=s.el.getBoundingClientRect(),o=i.left-32,a=-(window.innerHeight-i.top-22);t.style.display="",t.style.webkitTransform="translate3d(0,"+a+"px,0)",t.style.transform="translate3d(0,"+a+"px,0)";var n=t.getElementsByClassName("inner-hook")[0];n.style.webkitTransform="translate3d("+o+"px,0,0)",n.style.transform="translate3d("+o+"px,0,0)"}}},dropping:function(t,e){t.offsetHeight;this.$nextTick(function(){t.style.webkitTransform="translate3d(0,0,0)",t.style.transform="translate3d(0,0,0)";var s=t.getElementsByClassName("inner-hook")[0];s.style.webkitTransform="translate3d(0,0,0)",s.style.transform="translate3d(0,0,0)",t.addEventListener("transitionend",e)})},afterDrop:function(t){var e=this.dropBalls.shift();e&&(e.show=!1,t.style.display="none")},toggleList:function(){this.totalCount&&(this.fold=!this.fold)},empty:function(){this.selectProducts.forEach(function(t){t.count=0})},addProduct:function(t){this.drop(t)},hideList:function(){this.fold=!0},suborder:function(){this.totalPrice<this.minPrice||(this.$router.push("/order"),console.log(this.selectProducts))}}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"shopcart"},[s("div",{staticClass:"content",on:{click:t.toggleList}},[s("div",{staticClass:"content-left"},[s("div",{staticClass:"logo-wrapper"},[s("div",{staticClass:"logo",class:{highlight:t.totalCount>0}},[s("i",{staticClass:"icon-shopping_cart",class:{highlight:t.totalCount>0}})]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.totalCount>0,expression:"totalCount>0"}],staticClass:"num"},[t._v(t._s(t.totalCount))])]),t._v(" "),s("div",{staticClass:"price",class:{highlight:t.totalPrice>0}},[t._v("￥"+t._s(t.totalPrice))]),t._v(" "),s("div",{staticClass:"desc"},[t._v("另需配送费￥"+t._s(t.deliveryPrice)+"元")])]),t._v(" "),s("div",{staticClass:"content-right",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.suborder(e)}}},[s("div",{staticClass:"pay",class:t.payClass},[t._v("\n\t\t\t\t\t"+t._s(t.payDesc)+"\n\t\t\t\t")])])]),t._v(" "),s("div",{staticClass:"ball-container"},t._l(t.balls,function(e){return s("div",[s("transition",{attrs:{name:"drop"},on:{"before-enter":t.beforeDrop,enter:t.dropping,"after-enter":t.afterDrop}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"ball.show"}],staticClass:"ball"},[s("div",{staticClass:"inner inner-hook"})])])],1)})),t._v(" "),s("transition",{attrs:{name:"fold"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"shopcart-list"},[s("div",{staticClass:"list-header"},[s("h1",{staticClass:"title"},[t._v("购物车")]),t._v(" "),s("span",{staticClass:"empty",on:{click:t.empty}},[t._v("清空")])]),t._v(" "),s("div",{ref:"listContent",staticClass:"list-content"},[s("ul",t._l(t.selectProducts,function(e){return s("li",{staticClass:"product"},[s("span",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" "),s("div",{staticClass:"price"},[s("span",[t._v("￥"+t._s(e.price*e.count))])]),t._v(" "),s("div",{staticClass:"cartcontrol-wrapper"},[s("cartcontrol",{attrs:{product:e},on:{add:t.addProduct}})],1)])}))])])])],1),t._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"list-mask",on:{click:t.hideList}})])],1)},staticRenderFns:[]};var m=s("VU/8")(h,v,!1,function(t){s("KcjH")},null,null).exports,g=s("3opN"),_=s("IHkg"),b=s("ufP2"),C={name:"ElDialog",mixins:[g.a,b.a,_.a],props:{title:{type:String,default:""},modal:{type:Boolean,default:!0},modalAppendToBody:{type:Boolean,default:!0},appendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},width:String,fullscreen:Boolean,customClass:{type:String,default:""},top:{type:String,default:"15vh"},beforeClose:Function,center:{type:Boolean,default:!1}},data:function(){return{closed:!1}},watch:{visible:function(t){var e=this;t?(this.closed=!1,this.$emit("open"),this.$el.addEventListener("scroll",this.updatePopper),this.$nextTick(function(){e.$refs.dialog.scrollTop=0}),this.appendToBody&&document.body.appendChild(this.$el)):(this.$el.removeEventListener("scroll",this.updatePopper),this.closed||this.$emit("close"))}},computed:{style:function(){var t={};return this.width&&(t.width=this.width),this.fullscreen||(t.marginTop=this.top),t}},methods:{getMigratingConfig:function(){return{props:{size:"size is removed."}}},handleWrapperClick:function(){this.closeOnClickModal&&this.handleClose()},handleClose:function(){"function"==typeof this.beforeClose?this.beforeClose(this.hide):this.hide()},hide:function(t){!1!==t&&(this.$emit("update:visible",!1),this.$emit("close"),this.closed=!0)},updatePopper:function(){this.broadcast("ElSelectDropdown","updatePopper"),this.broadcast("ElDropdownMenu","updatePopper")}},mounted:function(){this.visible&&(this.rendered=!0,this.open(),this.appendToBody&&document.body.appendChild(this.$el))},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"dialog-fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"el-dialog__wrapper",on:{click:function(e){return e.target!==e.currentTarget?null:t.handleWrapperClick(e)}}},[s("div",{ref:"dialog",staticClass:"el-dialog",class:[{"is-fullscreen":t.fullscreen,"el-dialog--center":t.center},t.customClass],style:t.style},[s("div",{staticClass:"el-dialog__header"},[t._t("title",[s("span",{staticClass:"el-dialog__title"},[t._v(t._s(t.title))])]),t._v(" "),t.showClose?s("button",{staticClass:"el-dialog__headerbtn",attrs:{type:"button","aria-label":"Close"},on:{click:t.handleClose}},[s("i",{staticClass:"el-dialog__close el-icon el-icon-close"})]):t._e()],2),t._v(" "),t.rendered?s("div",{staticClass:"el-dialog__body"},[t._t("default")],2):t._e(),t._v(" "),t.$slots.footer?s("div",{staticClass:"el-dialog__footer"},[t._t("footer")],2):t._e()])])])},staticRenderFns:[]},w=s("VU/8")(C,y,!1,null,null,null).exports,x={components:{ElRow:s("DoGJ").a},name:"card",props:{cardDialogObj:{}},data:function(){return{currentDate:new Date}}},$={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-row",{staticClass:"index"},[s("el-card",{attrs:{"body-style":{padding:"0px"}}},[s("img",{staticClass:"image",attrs:{src:t.cardDialogObj.image}}),t._v(" "),s("div",{staticStyle:{padding:"14px"}},[s("span",[t._v(t._s(t.cardDialogObj.name))]),t._v(" "),s("div",{staticClass:"bottom clearfix"},[s("span",{staticClass:"info"},[t._v(t._s(t.cardDialogObj.info))])])])])],1)},staticRenderFns:[]};var I=!0,k={components:{Card:s("VU/8")(x,$,!1,function(t){s("vosO")},null,null).exports,ElDialog:w,Cartcontrol:f,shopcart:m},name:"products",props:["products","basic"],data:function(){return{listHeight:[],scrollY:0,cardDialogVisible:!1,cardDialogObj:{}}},computed:{currentIndex:function(){for(var t=0;t<this.listHeight.length;t++){var e=this.listHeight[t],s=this.listHeight[t+1];if(!s||this.scrollY>=e&&this.scrollY<s)return this._followScroll(t),t}return 0},selectProducts:function(){var t=[];return this.products.forEach(function(e){e.product.forEach(function(e){e.count&&t.push(e)})}),t}},methods:{_initScroll:function(){var t=this;this.meunScroll=new d.a(this.$refs.menuWrapper,{click:!0}),this.productsScroll=new d.a(this.$refs.productWrapper,{click:!0,probeType:3}),this.productsScroll.on("scroll",function(e){e.y<=0&&(t.scrollY=Math.abs(Math.round(e.y)))})},_calculateHeight:function(){var t=this.$refs.productList,e=0;this.listHeight.push(e);for(var s=0;s<t.length;s++){e+=t[s].clientHeight,this.listHeight.push(e)}},_followScroll:function(t){var e=this.$refs.menuList[t];this.meunScroll.scrollToElement(e,300,0,-100)},selectMenu:function(t,e){if(e._constructed){var s=this.$refs.productList[t];this.productsScroll.scrollToElement(s,300)}},addProduct:function(t){this._drop(t)},_drop:function(t){var e=this;this.$nextTick(function(){e.$refs.shopcart.drop(t)})},mTest:function(t){this.cardDialogVisible=!0,this.cardDialogObj=null,this.cardDialogObj=t,console.log(t.image),console.log(t.info),console.log(this.cardDialogObj)}},updated:function(){var t=this;I&&(this.$nextTick(function(){t._initScroll(),t._calculateHeight()}),I=!1)},beforeDestroy:function(){I=!0}},S={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"products"},[s("div",{ref:"menuWrapper",staticClass:"menu-wrapper"},[s("ul",t._l(t.products,function(e,i){return s("li",{ref:"menuList",refInFor:!0,staticClass:"menu-item",class:{current:t.currentIndex===i},on:{click:function(e){t.selectMenu(i,e)}}},[s("span",{staticClass:"text border-1px"},[t._v(t._s(e.name))])])}))]),t._v(" "),s("div",{ref:"productWrapper",staticClass:"product-wrapper"},[s("ul",t._l(t.products,function(e){return s("li",{ref:"productList",refInFor:!0},[s("h1",{staticClass:"title"},[t._v(t._s(e.name))]),t._v(" "),s("ul",t._l(e.product,function(e){return s("li",{staticClass:"product-item",on:{click:function(s){t.mTest(e)}}},[s("div",{staticClass:"icon"},[s("img",{attrs:{width:"57",height:"57",src:e.icon}})]),t._v(" "),s("div",{staticClass:"content"},[s("h2",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" "),s("p",{staticClass:"desc"},[t._v(t._s(e.description))]),t._v(" "),s("div",{staticClass:"price"},[s("span",[t._v("￥"+t._s(e.price))])]),t._v(" "),s("div",{staticClass:"cartcontrol-wrapper"},[s("cartcontrol",{attrs:{product:e},on:{add:t.addProduct}})],1)])])}))])}))]),t._v(" "),s("shopcart",{ref:"shopcart",attrs:{"select-products":t.selectProducts,"delivery-price":t.basic.deliveryPrice,"min-price":t.basic.minPrice}})],1),t._v(" "),s("el-dialog",{attrs:{visible:t.cardDialogVisible,width:"85%","show-close":!1,"custom-class":"mDialog"},on:{"update:visible":function(e){t.cardDialogVisible=e}}},[s("card",{attrs:{"card-dialog-obj":t.cardDialogObj}})],1)],1)},staticRenderFns:[]};var P={components:{Products:s("VU/8")(k,S,!1,function(t){s("fdft")},null,null).exports,Swipe:c},name:"Shop",data:function(){return{basic:{},products:{}}},computed:{storeBasic:function(){return console.log("---\x3e>>",this.$store.getters),this.$store.getters.baseInfo},storeProducts:function(){return console.log("---\x3e>>",this.$store.getters),this.$store.getters.productInfo}},created:function(){console.log("主UI")}},B={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("swipe",{attrs:{"img-datas":this.storeBasic.imgDatas}}),this._v(" "),e("products",{attrs:{products:this.storeProducts,basic:this.storeBasic}})],1)},staticRenderFns:[]};var E=s("VU/8")(P,B,!1,function(t){s("7uN0")},null,null).exports,D={name:"order",data:function(){return{dialogVisible:!1}},created:function(){console.log("OrderUI")},methods:{selectAddress:function(){console.log("selectAddress")},selectCoupon:function(){console.log("selectCoupon")},toPay:function(){console.log("toPay")}}},U={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-container",[s("div",{staticClass:"head",on:{click:t.selectAddress}},[s("el-header",[s("el-card",[s("span",{staticClass:"el-icon-plus",staticStyle:{color:"rgb(255, 128, 0)"}}),t._v(" "),s("span",[t._v("添加配送信息")]),t._v(" "),s("span",{staticClass:"el-icon-arrow-right",staticStyle:{float:"right"}})])],1)],1),t._v(" "),s("el-main",[s("el-card",{staticClass:"big-card"},[t._l(4,function(e){return s("div",{key:e},[s("div",{staticClass:"item text"},[s("span",[t._v(t._s("列表内容 "+e))]),t._v(" "),s("span",{staticStyle:{float:"right"}},[t._v("￥")])]),t._v(" "),s("hr")])}),t._v(" "),s("div",{staticClass:"text item"},[s("span",[t._v("服务费")]),t._v(" "),s("div",{staticStyle:{float:"right"}},[t._v("￥")])]),t._v(" "),s("div",{staticClass:"text item",on:{click:t.selectCoupon}},[s("span",[t._v("优惠区域")]),t._v(" "),s("span",{staticClass:"el-icon-arrow-right",staticStyle:{float:"right"}})]),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"text item"},[s("span",[t._v("总价")]),t._v(" "),s("span",{staticStyle:{float:"right"}},[t._v("还需支付\n\t\t\t\t\t\t"),s("span",{staticStyle:{"font-size":"20px"}},[t._v("￥66")])])])],2),t._v(" "),s("div",{on:{click:function(e){t.dialogVisible=!0}}},[s("el-card",{staticStyle:{"margin-top":"10px"}},[s("span",[t._v("备注")]),t._v(" "),s("span",{staticStyle:{float:"right"}},[t._v("对骑手小哥哥说\n\t\t\t\t\t\t"),s("span",{staticClass:"el-icon-arrow-right",staticStyle:{float:"right"}})])])],1)],1),t._v(" "),s("el-footer",{staticClass:"foot"},[s("div",{staticStyle:{"margin-top":"10px"}},[s("el-button",{attrs:{type:"text"}},[t._v("￥66")]),t._v(" "),s("el-button",{staticClass:"pay_btn",attrs:{type:"success"},on:{click:t.toPay}},[t._v("微信支付")])],1)])],1),t._v(" "),s("el-dialog",{attrs:{title:"备注",visible:t.dialogVisible,width:"90%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("el-input",{attrs:{placeholder:"请输入内容",type:"textarea",rows:3}}),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var F=s("VU/8")(D,U,!1,function(t){s("nylQ")},null,null).exports,V={name:"user",computed:{avatarURL:function(){return this.$store.getters.userBaseInfo.headimgurl}},created:function(){console.log("UserUI")}},R={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",[s("div",{staticClass:"headImgBG",style:{backgroundImage:"url("+t.avatarURL+")"}}),t._v(" "),s("img",{staticClass:"headImg",attrs:{src:t.avatarURL}})]),t._v(" "),s("el-card",{staticClass:" small-card"},[s("el-row",{staticClass:"row-bg",staticStyle:{"text-align":"center"},attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:8}},[s("h1",{staticStyle:{"font-size":"24px",color:"#FF0000"}},[t._v("0")]),t._v(" "),s("div",[t._v("优惠券")])]),t._v(" "),s("el-col",{attrs:{span:8}},[s("h1",{staticStyle:{"font-size":"24px",color:"#FF0000"}},[t._v("0")]),t._v(" "),s("div",{staticStyle:{"text-align":"center"}},[t._v("成长咖啡")])]),t._v(" "),s("el-col",{attrs:{span:8}},[s("h1",{staticStyle:{"font-size":"24px",color:"#FF0000"}},[t._v("0")]),t._v(" "),s("div",{staticStyle:{"text-align":"center"}},[t._v("鸡巴豆")])])],1)],1),t._v(" "),s("el-card",{staticClass:"big-card"},[s("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:12}},[s("div",{staticStyle:{"text-align":"center"}},[t._v("我的订单")])]),t._v(" "),s("el-col",{attrs:{span:12}},[s("div",{staticStyle:{"text-align":"center"}},[t._v("我的咖啡库")])])],1)],1),t._v(" "),s("el-card",{staticClass:"big-card"},[s("div",{staticClass:"text item"},[s("span",{staticClass:"el-icon-goods"}),t._v(" "),s("span",[t._v("兑换咖啡")]),t._v(" "),s("span",{staticClass:"el-icon-arrow-right",staticStyle:{float:"right"}})]),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"text item"},[s("span",{staticClass:"el-icon-share"}),t._v(" "),s("span",[t._v("请咖啡记录")]),t._v(" "),s("span",{staticClass:"el-icon-arrow-right",staticStyle:{float:"right"}})]),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"text item"},[s("span",{staticClass:"el-icon-star-off"}),t._v(" "),s("span",[t._v("咖啡福袋")]),t._v(" "),s("span",{staticClass:"el-icon-arrow-right",staticStyle:{float:"right"}})]),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"text item"},[s("span",{staticClass:"el-icon-tickets"}),t._v(" "),s("span",[t._v("咖啡库明细")]),t._v(" "),s("span",{staticClass:"el-icon-arrow-right",staticStyle:{float:"right"}})]),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"text item"},[s("span",{staticClass:"el-icon-more"}),t._v(" "),s("span",[t._v("更多")]),t._v(" "),s("span",{staticClass:"el-icon-arrow-right",staticStyle:{float:"right"}})])])],1)},staticRenderFns:[]};var T=s("VU/8")(V,R,!1,function(t){s("mKtS")},null,null).exports,L={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-container",[e("el-main",[e("div",[this._v("还在开发中")])])],1)},staticRenderFns:[]};var N=s("VU/8")({name:"building"},L,!1,function(t){s("UJUF")},"data-v-51cd1162",null).exports,j=s("mvHQ"),O=s.n(j),A={name:"admin_products",data:function(){return{fileList:[],dialogVisible:!1,timeStamps:null,products:{},product:{id:"",item:"",name:"",nameId:"",price:"",description:"",info:"",icon:"",image:""},rules:{item:[{required:!0,message:"请输入产品分组名称",trigger:"blur"},{min:1,max:10,message:"长度10个字符以内",trigger:"blur"}],name:[{required:!0,message:"请输入产品名称",trigger:"blur"},{min:1,max:10,message:"长度10个字符以内",trigger:"blur"}],price:[{required:!0,message:"请输入产品价格",trigger:"blur"},{type:"number",message:"产品价格必须为数字值"}],description:[{required:!0,message:"请输入产品描述",trigger:"blur"}],info:[{required:!0,message:"请输入产品信息",trigger:"blur"}]},testData:[{id:11111,name:"测试数据一",price:10,description:"测试数据一 明细",info:"测试数据一 明细明细明细明细明细明细明细明细明细明细明细明细明细明细明细明细明细明细明细明细"},{id:11111,name:"测试数据一",price:10,description:"测试数据一 明细",info:"测试数据一 明细明细明细明细明细明细明细明细明细明细明细明细明细明细明细明细明细明细明细明细"},{id:11111,name:"测试数据一",price:10,description:"测试数据一 明细",info:"测试数据一 明细明细明细明细明细明细明细明细明细明细明细明细明细明细明细明细明细明细明细明细"}]}},methods:{handlerAdd:function(){this.resetForm(),this.dialogVisible=!0,this.product={},this.timeStamps=(new Date).getTime(),this.fileList=[],console.log("添加产品弹窗",this.product)},handlerSubmit:function(){this.checkNull("item")||this.checkNull("name")||this.checkNull("price")?this.$message.error("参数有为空的哦，去查查吧"):0!==this.fileList.length?(this.dialogVisible=!1,this.$refs.uploadPic.submit(),this.product={}):this.$message.error("没有选择图片文件哦，去查查吧")},handleEdit:function(t,e){console.log("产品编辑",e),this.resetForm(),this.timeStamps=(new Date).getTime(),this.product=e,this.dialogVisible=!0},handleDelete:function(t,e){var s=this;console.log(t,e),this.$axios({method:"post",headers:{"Content-Type":"application/json"},url:"./api/product/delete",data:e}).then(function(t){console.log("删除产品",t),0===t.data.code?(s.$message({message:t.data.recdata.msg,type:"success"}),s.refreshProducts()):s.$message.error(t.data.recdata.msg)})},resetForm:function(){null!=this.$refs.product&&(this.$refs.product.resetFields(),null!=this.$refs.uploadPic&&this.$refs.uploadPic.clearFiles())},checkNull:function(t){return!(t in this.product)},mUpload:function(t){var e=this,s="";this.checkNull("nameId")?(console.log("添加产品",this.product),this.product.nameId=this.timeStamps,s="./api/product/set?openId="+this.$store.getters.userBaseInfo.openid):(console.log("修改产品",this.product),s="./api/product/update?openId="+this.$store.getters.userBaseInfo.openid),console.log("上传文件的内容",t),console.log("提交的数据",this.product);var i=new FormData;i.append("file",t.file),i.append("data",O()(this.product)),this.$axios({method:"post",url:s,data:i,headers:{"Content-Type":"multipart/form-data"}}).then(function(t){console.log("添加、修改产品",t),0===t.data.code?(e.$message({message:t.data.recdata.msg,type:"success"}),e.refreshProducts()):e.$message.error(t.data.recdata.msg)})},onChange:function(t,e){if(console.log("文件选择回调函数",t,e),"image/png"!==t.raw.type&&"image/jpeg"!==t.raw.type)return this.$message.error("文件类型有误哦，亲"),void this.$refs.uploadPic.clearFiles();this.fileList=e},refreshProducts:function(){var t=this;this.$axios({method:"get",url:"./api/product/get?openId="+this.$store.getters.userBaseInfo.openid}).then(function(e){console.log("刷新产品",e),0===e.data.code&&(console.log(e.data.recdata),t.products=e.data.recdata)})}},beforeCreate:function(){var t=this;console.log("admin_product"),this.$axios({method:"get",url:"./api/product/get?openId="+this.$store.getters.userBaseInfo.openid}).then(function(e){console.log("刷新产品",e),0===e.data.code&&(console.log(e.data.recdata),t.products=e.data.recdata)})}},H={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-button",{attrs:{type:"primary"},on:{click:t.handlerAdd}},[t._v("添加产品")]),t._v(" "),s("el-collapse",{attrs:{accordion:""}},t._l(t.products,function(e){return s("div",[s("el-collapse-item",{attrs:{title:e.name}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.product}},[s("el-table-column",{attrs:{prop:"nameId",label:"产品编号"}}),t._v(" "),s("el-table-column",{attrs:{label:"产品图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[s("img",{attrs:{src:t.row.icon,width:"100",height:"100"}})]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"name",label:"产品名称"}}),t._v(" "),s("el-table-column",{attrs:{prop:"price",label:"产品价格"}}),t._v(" "),s("el-table-column",{attrs:{prop:"description",label:"产品描述"}}),t._v(" "),s("el-table-column",{attrs:{prop:"info",label:"产品信息"}}),t._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),s("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(s){t.handleDelete(e.$index,e.row)}}},[t._v("删除\n\t\t\t\t\t\t\t\t")])]}}])})],1)],1)],1)})),t._v(" "),s("el-dialog",{attrs:{title:"添加产品",visible:t.dialogVisible,width:"25%","close-on-click-modal":!1,center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("el-form",{ref:"product",staticClass:"demo-ruleForm",attrs:{rules:t.rules,model:t.product,"status-icon":"","label-width":"100px"}},[s("el-form-item",{attrs:{label:"分组名称",prop:"item"}},[s("el-input",{attrs:{name:"0.0"},model:{value:t.product.item,callback:function(e){t.$set(t.product,"item",e)},expression:"product.item"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"产品名称",prop:"name"}},[s("el-input",{model:{value:t.product.name,callback:function(e){t.$set(t.product,"name",e)},expression:"product.name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"产品价格",prop:"price"}},[s("el-input",{model:{value:t.product.price,callback:function(e){t.$set(t.product,"price",t._n(e))},expression:"product.price"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"产品描述",prop:"description"}},[s("el-input",{model:{value:t.product.description,callback:function(e){t.$set(t.product,"description",e)},expression:"product.description"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"产品信息",prop:"info"}},[s("el-input",{attrs:{type:"textarea"},model:{value:t.product.info,callback:function(e){t.$set(t.product,"info",e)},expression:"product.info"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"产品图片"}},[s("el-upload",{ref:"uploadPic",staticClass:"upload-demo",attrs:{limit:1,action:"","auto-upload":!1,httpRequest:t.mUpload,"file-list":t.fileList,"on-change":t.onChange}},[s("el-button",{attrs:{size:"small",type:"primary"}},[t._v("选取文件")]),t._v(" "),s("div",{staticClass:"el-upload__tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1)],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.handlerSubmit}},[t._v("确 定")]),t._v(" "),s("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")])],1)],1)],1)},staticRenderFns:[]};var M=s("VU/8")(A,H,!1,function(t){s("Rq+N")},"data-v-32448a88",null).exports,q={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("订单表")])},staticRenderFns:[]};var z=s("VU/8")({name:"admin_orders"},q,!1,function(t){s("eCHE")},"data-v-24ff1076",null).exports,W={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("用户表")])},staticRenderFns:[]};var K={components:{Admin_users:s("VU/8")({name:"admin_users"},W,!1,function(t){s("ITfj")},"data-v-5753c72b",null).exports,Admin_orders:z,Admin_products:M},name:"admin",data:function(){return{itemActive:0}},methods:{handleItem:function(t){this.itemActive=t}}},Y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-container",{staticClass:"wrapper"},[s("el-header",{staticStyle:{height:"80px","background-color":"rgb(64,158,255)"}},[s("img",{staticClass:"header-logo",attrs:{alt:"AI-COFFEE-SHARE-LOGO"}})]),t._v(" "),s("el-container",{staticClass:"menu"},[s("el-aside",{staticClass:"menu",attrs:{width:"300px"}},[s("ul",{staticClass:"el-menu",attrs:{role:"menubar"}},[s("li",{staticClass:"el-menu-item",class:0===t.itemActive?"is-active":"",staticStyle:{"padding-left":"20px"},attrs:{role:"menuitem",tabindex:"1"},on:{click:function(e){t.handleItem(0)}}},[t._v("产品管理\n\t\t\t\t")]),t._v(" "),s("li",{staticClass:"el-menu-item",class:1===t.itemActive?"is-active":"",staticStyle:{"padding-left":"20px"},attrs:{role:"menuitem",tabindex:"2"},on:{click:function(e){t.handleItem(1)}}},[t._v("订单管理\n\t\t\t\t")]),t._v(" "),s("li",{staticClass:"el-menu-item",class:2===t.itemActive?"is-active":"",staticStyle:{"padding-left":"20px"},attrs:{role:"menuitem",tabindex:"3"},on:{click:function(e){t.handleItem(2)}}},[t._v("用户管理\n\t\t\t\t")])])]),t._v(" "),s("el-main",[0===t.itemActive?s("admin_products"):t._e(),t._v(" "),1===t.itemActive?s("admin_orders"):t._e(),t._v(" "),2===t.itemActive?s("admin_users"):t._e()],1)],1)],1)},staticRenderFns:[]};var G=s("VU/8")(K,Y,!1,function(t){s("jkMB")},"data-v-88ba923c",null).exports,J={name:"test",computed:{imgURL:function(){return this.$store.getters.userBaseInfo.headimgurl},count:function(){return this.$store.state.count}},created:function(){console.log("测试界面"),console.log(this.$store.state.userbaseInfo)},methods:{increment:function(){console.log("++++"),this.$store.commit("increment")},decrement:function(){console.log("----"),this.$store.commit("decrement")}}},Q={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("img",{attrs:{src:t.imgURL}}),t._v(" "),s("div",[t._v(t._s(t.imgURL))]),t._v(" "),s("button",{on:{click:t.increment}},[t._v("++++++++")]),t._v(" "),s("button",{on:{click:t.decrement}},[t._v("--------")]),t._v(" "),s("div",[t._v(t._s(t.count))])])},staticRenderFns:[]};var X=s("VU/8")(J,Q,!1,function(t){s("UpTR")},"data-v-686a1db4",null).exports;i.default.use(r.a);var Z=[{path:"/",redirect:"/products"},{path:"/products",name:"products",component:E},{path:"/order",name:"order",component:F,meta:{title:"确认订单"}},{path:"/account",name:"account",component:T,meta:{title:"个人中心"}},{path:"/building",name:"building",component:N,meta:{title:"开发中..."}},{path:"/admin",name:"admin",component:G,meta:{title:"管理中心..."}},{path:"*",redirect:"/building"},{path:"/test",name:"test",component:X}],tt=new r.a({mode:"history",base:"ai-coffee-share",routes:Z}),et=s("mtWM"),st=s.n(et),it=s("zL8q"),ot=s.n(it),at=null;st.a.interceptors.request.use(function(t){return console.log("请求拦截"),at=it.Loading.service({fullscreen:!0}),t}),st.a.interceptors.response.use(function(t){return console.log("响应拦截"),null!=at&&at.close(),at=null,t});s("34KM"),s("tvR6");var nt=s("NYxO");i.default.use(nt.a);var rt=new nt.a.Store({state:{userBaseInfo:{},baseInfo:{},productInfo:{}},mutations:{setUserBaseInfoMutations:function(t,e){console.error("store",e),t.userBaseInfo=e},setBaseInfoMutations:function(t,e){console.error("store",e),t.baseInfo=e},setProductInfoMutations:function(t,e){console.error("store",e),t.productInfo=e}},getters:{userBaseInfo:function(t){return console.log("store getters userBaseInfo",t.userBaseInfo),t.userBaseInfo},baseInfo:function(t){return console.log("store getters baseInfo",t.baseInfo),t.baseInfo},productInfo:function(t){return console.log("store getters productInfo",t.productInfo),t.productInfo}},actions:{setUserBaseInfo:function(t,e){t.commit("setUserBaseInfoMutations",e)},setBaseInfo:function(t,e){t.commit("setBaseInfoMutations",e)},setProductInfo:function(t,e){t.commit("setProductInfoMutations",e)}}});i.default.config.productionTip=!1,i.default.use(ot.a),i.default.prototype.$axios=st.a,new i.default({el:"#app",router:tt,store:rt,render:function(t){return t(n)}})},"Rq+N":function(t,e){},UJUF:function(t,e){},UpTR:function(t,e){},eCHE:function(t,e){},fdft:function(t,e){},jkMB:function(t,e){},mKtS:function(t,e){},nylQ:function(t,e){},tvR6:function(t,e){},vosO:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.a857d9a1f502014e6db6.js.map